<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Semana3</title>
  </head>
  <body>
    Entre com os dados separados por espa√ßo:
    <input type="text" id="dados" />
    <button onclick="criarTabela()">Gerar tabela</button>
    <div>
      <table id="table"></table>
    </div>
    <script>
      function criarTabela() {
        const dados = document.getElementById("dados").value;
        let vet = dados.split(" ");
        let vetN = convertNumber(vet);
        let maior = Math.max.apply(null, vetN);
        let menor = Math.min.apply(null, vetN);
        let at = maior - menor + 1;
        let k = Math.sqrt(vetN.length);
        k = Math.trunc(k);
        let infos = infoTab(at, k);
        const linhas = linhasTab(vetN, infos[1], infos[0]);
        const valores = valoresTab(vetN, linhas);
        const linhaTxt = textosColuna1(linhas);
        console.log(linhaTxt, valores);
        tabela(linhaTxt, valores, vetN.length);
      }
      function tabela(coluna1, coluna2, total) {
        const idtab = document.getElementById("table");

        coluna1.forEach((func, i) => {
          let row = idtab.insertRow(i);
          let cell = row.insertCell(0);
          cell.innerHTML = coluna1[i];
          cell = row.insertCell(1);
          cell.innerHTML = coluna2[i];
          cell = row.insertCell(2);
          cell.innerHTML = ((coluna2[i] * 100) / total).toFixed(2);
        });
      }
      function textosColuna1(valores) {
        let vetor = [];
        for (let i = 0; i <= valores.length - 2; i++) {
          vetor.push(`${valores[i]} |---- ${valores[i + 1]}`);
        }
        return vetor;
      }
      function valoresTab(valor, linha) {
        let vetor = [];

        for (let i = 0; i <= linha.length - 2; i++) {
          let cont = 0;
          for (b in valor) {
            if (valor[b] >= linha[i] && valor[b] < linha[i + 1]) {
              cont++;
            }
          }
          vetor.push(cont);
        }
        return vetor;
      }

      function linhasTab(vet, amp, linha) {
        let vetor = [];
        let min = vet[0];
        vetor.push(min);
        for (let i = 0; i <= linha - 1; i++) {
          vetor.push(vetor[i] + amp);
        }
        return vetor;
      }
      const convertNumber = vetor => {
        let novo = [];
        vetor.forEach((vet, i) => {
          novo.push(Number(vet));
        });
        novo.sort((a, b) => a - b);
        return novo;
      };
      function infoTab(at, k) {
        let linha;
        let amp = null;

        do {
          if (Number.isInteger(at / (k - 1))) {
            linha = k - 1;
            amp = at / (k - 1);
          } else if (Number.isInteger(at / k)) {
            linha = k;
            amp = at / k;
          } else if (Number.isInteger(at / (k + 1))) {
            linha = k + 1;
            amp = at / (k + 1);
          } else {
            at++;
          }
        } while (amp == null);
        return [linha, amp];
      }
    </script>
  </body>
</html>
